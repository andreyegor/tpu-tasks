# Сбалансированные деревья: поиск, добавление и удаление вершин. Реализация АВЛ дерева.

(возможно в семестре изучались кч деревья, но я тогда не учился и больше люблю авл, а кч изучал давно и немного)

## Теоретическая шпаргалка

**АВЛ дерево** - это бинарное дерево поиска, такое что для любой вершины высота каждого из его поддеревьев отличается не более чем на 1. Поддержание такого инварианта гаранитрует _O(logN)_ для операций выбора (поиска), добавления/удаления элементов и аналогичных.

Я не буду отдельно расказывать как поддердка этого инварианта работает в общем случае, а сразу сошлюсь на мою реализацию.

## Описание программы

Класс вершины `Node` хранит ключ, предка, левого и правых детей, высоту поддерева

Определим для вершин:

- **Малое левое/правое вращение** - Объявим корнем правого/левого сына вершины, детей переподвесим. За это в коде отвечают `__sl_rotation` и `__sr_rotation`, а сама реализация обобщена в `__rotation`.
- **Большое левое/правое вращение** - Сначала ыполним малое правое/левое вращение для правого/левого поддерева, после чего левое/правое вращение для вершины над которой совершается операция. В коде за это отвечают `__bl_rotation` и `__br_rotation`.

Введём **баланс** для каждого узла - разность высоты правого и левого поддеревьев.

Левые вращения используются в ситуации, когда у корня поддерева баланс +2 и:

- у правого сына баланс 0 и +1, тогда используем малое левое вращение
- у правого сына баланс -1, тогда используем большое левое вращение

Правые вращения используются в ситуации, когда у корня поддерева баланс -2 (перекос влево) и:

- у левого сына баланс 0 и -1, тогда используем малое правое вращение
- у левого сына баланс +1, тогда используем большое правое вращение

Другиз нарушающих инвариант ситуаций (модуль баланса больше двух) не возникнет, они сводятся к уже известным в подеревьях.

Решать какое вращение применять будем только внутри `__balance`. Для переданного в него узла пересчитаем высоты, проверим нужно ли править баланс, если нужно поправим, после чего поднимемся в родительский узел и вызовем `__balance` уже для него.

Добавление и удаление узлов работет как обычно, но с вызовом `__balance` в конце. Я опущу их подробное описание, как и описание некоторых вспомогательных.

Для отображения бинарных деревьев в консоли используется модифицированный фрагмент [ASCII визуализатора](https://github.com/cflamant/leetcode-trees/) с открытым исходным кодом за авторством [cflamant](https://github.com/cflamant). Условия лицензии соблюдены.
